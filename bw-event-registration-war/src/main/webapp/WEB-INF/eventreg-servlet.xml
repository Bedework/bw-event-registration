<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns:aop="http://www.springframework.org/schema/aop"
     xsi:schemaLocation="
http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd">

 <bean id="defaultHandlerMapping"
        class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping"/>

  <bean id="sessMan"
        class="org.bedework.eventreg.bus.SessionManager"
        scope="session">
   <aop:scoped-proxy/>
   <property name="eventregDb">
      <ref bean="eventregDb"/>
    </property>
  </bean>

  <!-- =================== Events Registration User actions ========================== -->

  <bean id="initController"
        class="org.bedework.eventreg.web.InitController"
        scope="session">
    <aop:scoped-proxy/>
    <property name="sessionManager">
      <ref bean="sessMan"/>
    </property>
    <property name="forwardFail" value="forward:/docs/error.jsp" />
  </bean>

  <bean id="outputCountsController"
        class="org.bedework.eventreg.web.OutputCountsController"
        scope="session">
    <aop:scoped-proxy/>
    <property name="sessionManager">
      <ref bean="sessMan"/>
    </property>
    <property name="forwardFail" value="forward:/docs/error.jsp" />
  </bean>

  <bean id="removeAgendaRegController"
        class="org.bedework.eventreg.web.RemoveRegController"
        scope="session">
    <aop:scoped-proxy/>
    <property name="sessionManager">
      <ref bean="sessMan"/>
    </property>
    <property name="forwardFail" value="forward:/docs/error.jsp" />
    <property name="forwardTo" value="forward:agenda.do" />
  </bean>

  <bean id="updateRegController"
        class="org.bedework.eventreg.web.UpdateRegController"
        scope="session">
    <aop:scoped-proxy/>
    <property name="sessionManager">
      <ref bean="sessMan"/>
    </property>
    <property name="forwardFail" value="forward:/docs/error.jsp" />
  </bean>


    <property name="mappings">
      <props>
        <!-- Events Registration Actions -->
        <prop key="auth.do">authController</prop>

        <prop key="init.do">initController</prop>
        <prop key="eventreg.do">eventregController</prop>
        <prop key="agenda.do">userAgendaController</prop>
        <prop key="updateReg.do">updateRegController</prop>
        <prop key="removeReg.do">removeRegController</prop>
        <prop key="removeAgendaReg.do">removeAgendaRegController</prop>

        <prop key="counts.do">outputCountsController</prop>

        <prop key="logout.do">logoutController</prop>
      </props>
    </property>
  </bean>
</beans>

